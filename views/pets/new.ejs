<%- include('../partials/header.ejs') %>

<h1>Add a New Pet</h1>
<div class="container">
  <form action="/pets" method="POST" enctype="multipart/form-data">
    <div class="form-group">
      <label for="name">Name:</label>
      <input type="text" class="form-control" id="name" name="name" required />
    </div>
    <div class="form-group">
      <label for="breed">Breed:</label>
      <input
        type="text"
        class="form-control"
        id="breed"
        name="breed"
        required
      />
    </div>
    <div class="form-group">
      <label for="type">Type:</label>
      <input type="text" class="form-control" id="type" name="type" required />
    </div>
    <div class="form-group">
      <label for="age">Age:</label>
      <input type="number" class="form-control" id="age" name="age" />
    </div>
    <div class="form-group">
      <label for="vaccination">Vaccination:</label>
      <input
        type="text"
        class="form-control"
        id="vaccination"
        name="vaccination"
      />
    </div>
    <div class="form-group">
      <label for="location">Location:</label>
      <input type="text" class="form-control" id="location" name="location" />
      <% if (errorMessage) { %>
      <div class="alert alert-danger mt-2"><%= errorMessage %></div>
      <% } %>
    </div>
    <div class="form-group">
      <label for="images">Upload Images:</label>
      <input
        type="file"
        class="form-control"
        id="images"
        name="images"
        multiple
      />
    </div>
    <button type="submit" class="btn btn-primary mt-2">Submit</button>
  </form>
</div>

<%- include('../partials/footer.ejs') %>

<script>
  function initAutocomplete() {
    const locationInput = document.getElementById('location');
    const autocomplete = new google.maps.places.Autocomplete(locationInput, {
      types: ['geocode'],
    });
  }

  document.addEventListener('DOMContentLoaded', function () {
    const script = document.createElement('script');
    script.src = `https://maps.googleapis.com/maps/api/js?key=<%= googleMapsApiKey %>&libraries=places&callback=initAutocomplete`;
    script.async = true;
    script.defer = true;
    document.head.appendChild(script);
  });
</script>
